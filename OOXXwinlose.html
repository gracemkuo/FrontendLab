<!DOCTYPEhtml>
    <html lang="en">

    <head>
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

        <title>OOXX-類別版, 判斷輸贏-</title>
        <style>
            td {
                text-align: center;
                cursor: pointer;
            }
        </style>

        <script>

            // var array = [[],[],[]]

            class OOXX {
                constructor() {
                    this.data = []
                    this.data [0] = ['a', 'b', 'c']
                    this.data [1] = ['d', 'e', 'f']
                    this.data [2] = ['g', 'h', 'i']
                }
                setPoint(x, y, point) {
                    this.data[x][y] = point
                }
                HasWinner() {
                    if (this.data[0][0] == this.data[1][1] && this.data[2][2] == this.data[1][1]) {
                        return this.data[2][2]//對角
                    } else if (this.data[2][0] == this.data[1][1] && this.data[0][2] == this.data[1][1]) {
                        return this.data[1][1]//對角
                    } else if (this.data[0][0] == this.data[0][1] && this.data[0][2] == this.data[0][1]) {
                        return this.data[0][0]//1
                    } else if (this.data[1][0] == this.data[1][1] && this.data[1][1] == this.data[1][2]) {
                        return this.data[1][0]//2
                    } else if (this.data[2][0] == this.data[2][1] && this.data[2][1] == this.data[2][2]) {
                        return this.data[2][0]//3
                    } else if (this.data[0][0] == this.data[1][0] && this.data[1][0] == this.data[2][0]) {
                        return this.data[0][0]//1-1
                    } else if (this.data[1][1] == this.data[0][1] && this.data[1][1] == this.data[2][1]) {
                        return this.data[1][1]//1-2
                    } else if (this.data[1][2] == this.data[2][2] && this.data[0][2] == this.data[1][2]) {
                        return this.data[1][2]//1-3
                    }
                    return '';
                }
            }
            var flag = "";
            var game = new OOXX();

            function SetPoint(obj) {
                //alert(obj);
                if (obj.innerText != "_") return;
                if (flag == "X") {
                    flag = "O";
                    obj.innerText = 'O';
                }
                else {
                    flag = "X";
                    obj.innerText = 'X';
                }
                //show
                var label = document.getElementById('lebel1');
                //顯示位置
                label.innerHTML = "結果:" + "rowIndex: " + obj.parentElement.rowIndex +
                    " CellIndex: " + obj.cellIndex + " --> " + obj.innerText;
                //設定落子
                game.SetPoint(obj.parentElement.rowIndex, obj.cellIndex, obj.innerText);
                //有人贏嗎?
                if (game.HasWinner() != '') label.innerHTML =
                    `<span style='color:red'>winner : ${game.HasWinner()}</span>`;
            }
        </script>
    </head>

    <body>
        <h1>OOXX遊戲</h1>
        <div style="font-size: 60px">
            <table border="1" style="width: 600px; height:400px">
                <tr>
                    <td id="s1" onclick="SetPoint(this);">_</td>
                    <td id="s2" onclick="SetPoint(this);">_</td>
                    <td id="s3" onclick="SetPoint(this);">_</td>
                </tr>
                <tr>
                    <td id="s4" onclick="SetPoint(this);">_</td>
                    <td id="s5" onclick="SetPoint(this);">_</td>
                    <td id="s6" onclick="SetPoint(this);">_</td>
                </tr>
                <tr>
                    <td id="s7" onclick="SetPoint(this);">_</td>
                    <td id="s8" onclick="SetPoint(this);">_</td>
                    <td id="s9" onclick="SetPoint(this);">_</td>
                </tr>
            </table>
            <label id=lebel1 style="font-size: 40px;">結果:</label>
        </div>
    </body>

    </html>